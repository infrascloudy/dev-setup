#!/usr/bin/env bash
function runDots() {
    # Ask for the administrator password upfront
    sudo -v

    # Keep-alive: update existing `sudo` time stamp until the script has finished
    while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

    for ARG in "$@"
    do
        if [ $ARG == "bootstrap" ] || [ $ARG == "all" ]; then
            echo ""
            echo "================================================="
            echo "Syncing the dev-setup repo to your local machine."
            echo "================================================="
            echo ""
            cd ~ && curl -#L https://github.com/infrascloudy/dev-setup//tarball/master | tar -xzv --strip-components 1 --exclude={README.md,LICENSE}
        fi
    done


}

read -p "This script may overwrite existing files in your home directory. Are you sure? (y/n) " -n 1;
echo "";
if [[ $REPLY =~ ^[Yy]$ ]]; then
    runDots $@
fi;

unset runDots;